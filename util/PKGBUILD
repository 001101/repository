pkgname=epiphyte-build
pkgver=0.8
pkgrel=1
pkgdesc="epiphyte package build helpers"
url="https://github.com/epiphyte/repository"
license=('MIT')
makedepends=('git' 'pandoc')
depends=('pandoc')
source=("git+$url")
sha512sums=('SKIP')

pkgver(){
    cd ${srcdir}/repository
    printf "%s.c%s" "$(date +%Y%m%d.%H%M)" "$(git rev-parse --short HEAD)"
}

build() {
    cd ${srcdir}/repository
    pandoc README.md --out util/readme.html
}

package() {

    cd ${srcdir}/repository/util
    install -Dm 755 epiphyte-package.sh $pkgdir/usr/local/bin/epiphyte-package
    install -Dm 755 epiphyte-deploy.sh $pkgdir/usr/local/bin/epiphyte-deploy
    install -Dm 644 package.css $pkgdir/opt/epiphyte/epiphyte-build/package.css
    install -Dm 644 package.js $pkgdir/opt/epiphyte/epiphyte-build/package.js
    install -Dm 644 readme.html $pkgdir/opt/epiphyte/epiphyte-build/readme.html
}

